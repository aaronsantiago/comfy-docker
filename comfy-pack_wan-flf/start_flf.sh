(sleep 30s && curl 'http://0.0.0.0:8188/api/bentoml/serve' \
  -H 'Accept: */*' \
  -H 'Accept-Language: en-US,en;q=0.9' \
  -H 'Cache-Control: no-cache' \
  -H 'Comfy-User;' \
  -H 'Connection: keep-alive' \
  -H 'Content-Type: application/json' \
  -H 'DNT: 1' \
  -H 'Origin: http://0.0.0.0:8188' \
  -H 'Pragma: no-cache' \
  -H 'Referer: http://0.0.0.0:8188/' \
  -H 'User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36' \
  --data-raw $'{"host":"0.0.0.0","port":"3000","workflow":{"id":"7c6603fc-8871-4e88-a3dd-ac43e7650d8e","revision":0,"last_node_id":120,"last_link_id":200,"nodes":[{"id":46,"type":"WanVideoTextEmbedBridge","pos":[485.5692138671875,655.3907470703125],"size":[315,46],"flags":{},"order":35,"mode":2,"inputs":[{"name":"positive","type":"CONDITIONING","link":54},{"name":"negative","type":"CONDITIONING","link":55}],"outputs":[{"name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","links":null}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoTextEmbedBridge"},"widgets_values":[]},{"id":50,"type":"CLIPTextEncode","pos":[35.57008361816406,915.3912353515625],"size":[400,200],"flags":{},"order":29,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":53}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[55]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走"]},{"id":48,"type":"CLIPLoader","pos":[-324.42987060546875,665.3908081054688],"size":[315,106],"flags":{},"order":0,"mode":2,"inputs":[],"outputs":[{"name":"CLIP","type":"CLIP","slot_index":0,"links":[52,53]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPLoader"},"widgets_values":["umt5_xxl_fp16.safetensors","wan","default"]},{"id":42,"type":"Note","pos":[-580,-760],"size":[314.96246337890625,152.77333068847656],"flags":{},"order":1,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Adjust the blocks to swap based on your VRAM, this is a tradeoff between speed and memory usage.\\n\\nAlternatively there\'s option to use VRAM management introduced in DiffSynt-Studios. This is usually slower, but saves even more VRAM compared to BlockSwap"],"color":"#432","bgcolor":"#653"},{"id":36,"type":"Note","pos":[160,-1010],"size":[374.3061828613281,171.9547576904297],"flags":{},"order":2,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["fp8_fast seems to cause huge quality degradation\\n\\nfp_16_fast enables \\"Full FP16 Accmumulation in FP16 GEMMs\\" feature available in the very latest pytorch nightly, this is around 20% speed boost. \\n\\nSageattn if you have it installed can be used for almost double inference speed"],"color":"#432","bgcolor":"#653"},{"id":33,"type":"Note","pos":[170,-1150],"size":[359.0753479003906,88],"flags":{},"order":3,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Models:\\nhttps://huggingface.co/Kijai/WanVideo_comfy/tree/main"],"color":"#432","bgcolor":"#653"},{"id":51,"type":"Note","pos":[-294.4300231933594,495.39044189453125],"size":[253.16725158691406,88],"flags":{},"order":4,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You can also use native ComfyUI text encoding with these nodes instead of the original, the models are node specific and can\'t otherwise be mixed."],"color":"#432","bgcolor":"#653"},{"id":44,"type":"Note","pos":[-620.9041137695312,-1049.732421875],"size":[303.0501403808594,88],"flags":{},"order":5,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["If you have Triton installed, connect this for ~30% speed increase"],"color":"#432","bgcolor":"#653"},{"id":60,"type":"Note","pos":[-1319.92041015625,-594.809326171875],"size":[253.16725158691406,88],"flags":{},"order":6,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["You can use either the original clip vision or the normal comfyui clip vision loader, they are the same model in the end."],"color":"#432","bgcolor":"#653"},{"id":59,"type":"CLIPVisionLoader","pos":[-1015.7999267578125,-588.650390625],"size":[315,58],"flags":{},"order":7,"mode":2,"inputs":[],"outputs":[{"name":"CLIP_VISION","type":"CLIP_VISION","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPVisionLoader"},"widgets_values":["clip_vision_h.safetensors"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":77,"type":"ImageResize+","pos":[-1031.8409423828125,-105.94513702392578],"size":[315,218],"flags":{},"order":39,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":185},{"name":"width","type":"INT","widget":{"name":"width"},"link":97},{"name":"height","type":"INT","widget":{"name":"height"},"link":98}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[140]},{"name":"width","type":"INT","links":null},{"name":"height","type":"INT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"76e9d1e4399bd025ce8b12c290753d58f9f53e93","Node name for S&R":"ImageResize+","aux_id":"kijai/ComfyUI_essentials"},"widgets_values":[480,832,"lanczos","fill / crop","always",16]},{"id":91,"type":"SetNode","pos":[-633.0812377929688,-122.31965637207031],"size":[210,60],"flags":{"collapsed":true},"order":40,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":140}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[141,142,169,171]}],"title":"Set_start_image","properties":{"previousName":"start_image"},"widgets_values":["start_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":92,"type":"SetNode","pos":[-637.5855712890625,165.05795288085938],"size":[210,60],"flags":{"collapsed":true},"order":38,"mode":0,"inputs":[{"name":"IMAGE","type":"IMAGE","link":143}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[144,176]}],"title":"Set_end_image","properties":{"previousName":"end_image"},"widgets_values":["end_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":93,"type":"GetNode","pos":[1661.8018798828125,-959.0050659179688],"size":[210,60],"flags":{"collapsed":true},"order":8,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[147]}],"title":"Get_start_image","properties":{},"widgets_values":["start_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":94,"type":"GetNode","pos":[1665.4052734375,-903.6002807617188],"size":[210,58],"flags":{"collapsed":true},"order":9,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[149]}],"title":"Get_end_image","properties":{},"widgets_values":["end_image"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":95,"type":"AddLabel","pos":[1854.9163818359375,-955.1511840820312],"size":[315,274],"flags":{"collapsed":true},"order":30,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":147},{"name":"caption","shape":7,"type":"STRING","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[148]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","start_frame","up"]},{"id":96,"type":"AddLabel","pos":[1856.7181396484375,-903.8018188476562],"size":[315,274],"flags":{"collapsed":true},"order":31,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":149},{"name":"caption","shape":7,"type":"STRING","link":null}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[150]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"AddLabel"},"widgets_values":[10,2,48,32,"white","black","FreeMono.ttf","end_frame","up"]},{"id":70,"type":"ImageConcatMulti","pos":[1680.7264404296875,-854.5946655273438],"size":[315,150],"flags":{},"order":36,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":148},{"name":"image_2","type":"IMAGE","link":150}],"outputs":[{"name":"images","type":"IMAGE","links":[158]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028"},"widgets_values":[2,"down",true,null]},{"id":101,"type":"WanVideoDecode","pos":[1688.0194091796875,-647.6461791992188],"size":[315,198],"flags":{},"order":44,"mode":0,"inputs":[{"name":"vae","type":"WANVAE","link":165},{"name":"samples","type":"LATENT","link":166}],"outputs":[{"name":"images","type":"IMAGE","links":[167]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoDecode"},"widgets_values":[false,272,272,144,128]},{"id":72,"type":"WanVideoSLG","pos":[909.8729248046875,168.4285125732422],"size":[315,106],"flags":{},"order":10,"mode":0,"inputs":[],"outputs":[{"name":"slg_args","type":"SLGARGS","links":[]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoSLG"},"widgets_values":["9",0.20000000000000004,0.8000000000000002]},{"id":103,"type":"WanVideoExperimentalArgs","pos":[889.739013671875,324.5948486328125],"size":[327.5999755859375,226],"flags":{},"order":11,"mode":0,"inputs":[],"outputs":[{"name":"exp_args","type":"EXPERIMENTALARGS","links":[]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoExperimentalArgs"},"widgets_values":["",true,false,0,false,1,1.25,20]},{"id":104,"type":"MarkdownNote","pos":[624.0808715820312,-1073.8148193359375],"size":[495.010009765625,180.2772979736328],"flags":{},"order":12,"mode":0,"inputs":[],"outputs":[],"properties":{},"widgets_values":["Model links\\n\\nfp8:\\n\\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-FLF2V-14B-720P_fp8_e4m3fn.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-FLF2V-14B-720P_fp8_e4m3fn.safetensors)\\n\\nfp16:\\n\\n[https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-FLF2V-14B-720P_fp16.safetensors](https://huggingface.co/Kijai/WanVideo_comfy/blob/main/Wan2_1-FLF2V-14B-720P_fp16.safetensors)"],"color":"#432","bgcolor":"#653"},{"id":45,"type":"WanVideoVRAMManagement","pos":[-210,-580],"size":[315,58],"flags":{},"order":13,"mode":0,"inputs":[],"outputs":[{"name":"vram_management_args","type":"VRAM_MANAGEMENTARGS","links":[]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoVRAMManagement"},"widgets_values":[1],"color":"#223","bgcolor":"#335"},{"id":88,"type":"WanVideoClipVisionEncode","pos":[-284.5208740234375,-401.384033203125],"size":[327.5999755859375,262],"flags":{},"order":41,"mode":0,"inputs":[{"name":"clip_vision","type":"CLIP_VISION","link":123},{"name":"image_1","type":"IMAGE","link":141},{"name":"image_2","shape":7,"type":"IMAGE","link":176},{"name":"negative_image","shape":7,"type":"IMAGE","link":null}],"outputs":[{"name":"image_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","links":[172]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoClipVisionEncode"},"widgets_values":[1,1,"center","concat",false,0,0.5],"color":"#233","bgcolor":"#355"},{"id":68,"type":"GetImageSizeAndCount","pos":[1695.9385986328125,-379.56011962890625],"size":[277.20001220703125,86],"flags":{},"order":45,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":167}],"outputs":[{"name":"image","type":"IMAGE","links":[164,184]},{"label":"768 width","name":"width","type":"INT","links":null},{"label":"768 height","name":"height","type":"INT","links":[151]},{"label":"81 count","name":"count","type":"INT","links":null}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028","Node name for S&R":"GetImageSizeAndCount"},"widgets_values":[]},{"id":111,"type":"VHS_SelectFilename","pos":[2983.680908203125,-1251.9781494140625],"size":[224.2685546875,58],"flags":{},"order":48,"mode":0,"inputs":[{"name":"filenames","type":"VHS_FILENAMES","link":188}],"outputs":[{"name":"Filename","type":"STRING","links":[189]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"4c7858ddd5126f7293dc3c9f6e0fc4c263cde079","Node name for S&R":"VHS_SelectFilename"},"widgets_values":{"index":-1}},{"id":109,"type":"CPackOutputFile","pos":[3233.775390625,-1170.285888671875],"size":[315,58],"flags":{},"order":50,"mode":0,"inputs":[{"name":"filename","type":"STRING","link":189}],"outputs":[],"properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackOutputFile"},"widgets_values":["cpack_output_"]},{"id":76,"type":"ImageResize+","pos":[-1061.4039306640625,275.6357421875],"size":[315,218],"flags":{},"order":34,"mode":0,"inputs":[{"name":"image","type":"IMAGE","link":186},{"name":"width","type":"INT","widget":{"name":"width"},"link":193},{"name":"height","type":"INT","widget":{"name":"height"},"link":194}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[143]},{"name":"width","type":"INT","links":[97,135]},{"name":"height","type":"INT","links":[98,136]}],"properties":{"cnr_id":"comfyui_essentials","ver":"76e9d1e4399bd025ce8b12c290753d58f9f53e93","Node name for S&R":"ImageResize+","aux_id":"kijai/ComfyUI_essentials"},"widgets_values":[768,768,"lanczos","fill / crop","always",16]},{"id":35,"type":"WanVideoTorchCompileSettings","pos":[-276.8500671386719,-1050.6326904296875],"size":[421.6000061035156,202],"flags":{},"order":14,"mode":0,"inputs":[],"outputs":[{"name":"torch_compile_args","type":"WANCOMPILEARGS","slot_index":0,"links":[192]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoTorchCompileSettings"},"widgets_values":["inductor",false,"default",false,64,true,128],"color":"#223","bgcolor":"#335"},{"id":113,"type":"CPackInputInt","pos":[-1691.4158935546875,630.4197387695312],"size":[315,106],"flags":{},"order":15,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"INT","links":[193]}],"title":"width","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputInt"},"widgets_values":[768,0,1280]},{"id":114,"type":"CPackInputInt","pos":[-1675.78759765625,803.5774536132812],"size":[315,106],"flags":{},"order":16,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"INT","links":[194]}],"title":"height","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputInt"},"widgets_values":[768,0,1280]},{"id":49,"type":"CLIPTextEncode","pos":[35.57008361816406,665.3908081054688],"size":[400,200],"flags":{},"order":28,"mode":2,"inputs":[{"name":"clip","type":"CLIP","link":52}],"outputs":[{"name":"CONDITIONING","type":"CONDITIONING","slot_index":0,"links":[54]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"CLIPTextEncode"},"widgets_values":["CG 动画风格，一名身穿绿色宽松衣服、戴着面罩的男子正朝镜头跑来"]},{"id":16,"type":"WanVideoTextEncode","pos":[783.4046020507812,-378.40771484375],"size":[420.30511474609375,261.5306701660156],"flags":{},"order":37,"mode":0,"inputs":[{"name":"t5","type":"WANTEXTENCODER","link":15},{"name":"model_to_offload","shape":7,"type":"WANVIDEOMODEL","link":103},{"name":"positive_prompt","type":"STRING","widget":{"name":"positive_prompt"},"link":187}],"outputs":[{"name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","slot_index":0,"links":[30]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoTextEncode"},"widgets_values":["CG动画风格，一只猫看着镜头。背景是一片森林，白天。镜头向左平移，露出一个女孩。特写镜头，仰望天空","色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走",true],"color":"#332922","bgcolor":"#593930"},{"id":71,"type":"ImageConcatMulti","pos":[2348.09814453125,-599.4049682617188],"size":[315,170],"flags":{},"order":49,"mode":0,"inputs":[{"name":"image_1","type":"IMAGE","link":164},{"name":"image_2","type":"IMAGE","link":152},{"name":"image_3","type":"IMAGE","link":158}],"outputs":[{"name":"images","type":"IMAGE","links":[90]}],"properties":{"cnr_id":"comfyui-kjnodes","ver":"52c2e31a903fec2dd654fb614ea82ba2757d5028"},"widgets_values":[3,"left",true,null]},{"id":97,"type":"EmptyImage","pos":[2134.670166015625,-386.76824951171875],"size":[315,130],"flags":{"collapsed":true},"order":47,"mode":0,"inputs":[{"name":"height","type":"INT","widget":{"name":"height"},"link":151}],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[152]}],"properties":{"cnr_id":"comfy-core","ver":"0.3.26","Node name for S&R":"EmptyImage"},"widgets_values":[8,512,1,0]},{"id":105,"type":"VHS_VideoCombine","pos":[2712.60986328125,-1196.7645263671875],"size":[219.3603515625,334],"flags":{},"order":46,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":184},{"name":"audio","shape":7,"type":"AUDIO","link":null},{"name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":[188]}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"4c7858ddd5126f7293dc3c9f6e0fc4c263cde079","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"AnimateDiff_00055.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"AnimateDiff_00055.png","fullpath":"/home/lith/workspace/ComfyUI/output/AnimateDiff_00055.mp4"}}}},{"id":115,"type":"CPackInputInt","pos":[-1669.634765625,991.250244140625],"size":[315,106],"flags":{},"order":17,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"INT","links":[195]}],"title":"steps","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputInt"},"widgets_values":[30,0,100]},{"id":117,"type":"SimpleMath+","pos":[-185.593505859375,214.34486389160156],"size":[315,98],"flags":{},"order":33,"mode":0,"inputs":[{"name":"a","shape":7,"type":"*","link":196},{"name":"b","shape":7,"type":"*","link":null},{"name":"c","shape":7,"type":"*","link":null}],"outputs":[{"name":"INT","type":"INT","links":[197]},{"name":"FLOAT","type":"FLOAT","links":null}],"properties":{"cnr_id":"comfyui_essentials","ver":"1.1.0","Node name for S&R":"SimpleMath+"},"widgets_values":["a * 16 + 1"]},{"id":116,"type":"CPackInputInt","pos":[-1676.459228515625,1175.32177734375],"size":[315,106],"flags":{},"order":18,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"INT","links":[196]}],"title":"seconds","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputInt"},"widgets_values":[2,0,5]},{"id":52,"type":"WanVideoTeaCache","pos":[898.4050903320312,-54.12175369262695],"size":[315,178],"flags":{},"order":19,"mode":0,"inputs":[],"outputs":[{"name":"teacache_args","type":"TEACACHEARGS","links":[199]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoTeaCache"},"widgets_values":[0.22000000000000006,6,-1,"offload_device","true","e0"]},{"id":89,"type":"WanVideoImageToVideoEncode","pos":[176.49185180664062,-125.9861068725586],"size":[352.79998779296875,346],"flags":{},"order":42,"mode":0,"inputs":[{"name":"vae","type":"WANVAE","link":170},{"name":"clip_embeds","type":"WANVIDIMAGE_CLIPEMBEDS","link":172},{"name":"start_image","shape":7,"type":"IMAGE","link":171},{"name":"end_image","shape":7,"type":"IMAGE","link":144},{"name":"control_embeds","shape":7,"type":"WANVIDIMAGE_EMBEDS","link":null},{"name":"temporal_mask","shape":7,"type":"MASK","link":null},{"name":"extra_latents","shape":7,"type":"LATENT","link":null},{"name":"width","type":"INT","widget":{"name":"width"},"link":135},{"name":"height","type":"INT","widget":{"name":"height"},"link":136},{"name":"num_frames","type":"INT","widget":{"name":"num_frames"},"link":197}],"outputs":[{"name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","links":[133]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoImageToVideoEncode"},"widgets_values":[832,480,33,0,1,true,false,true],"color":"#322","bgcolor":"#533"},{"id":30,"type":"VHS_VideoCombine","pos":[2791.772216796875,-603.07373046875],"size":[887.1368408203125,334],"flags":{},"order":51,"mode":0,"inputs":[{"name":"images","type":"IMAGE","link":90},{"name":"audio","shape":7,"type":"AUDIO","link":null},{"name":"meta_batch","shape":7,"type":"VHS_BatchManager","link":null},{"name":"vae","shape":7,"type":"VAE","link":null}],"outputs":[{"name":"Filenames","type":"VHS_FILENAMES","links":null}],"properties":{"cnr_id":"comfyui-videohelpersuite","ver":"0a75c7958fe320efcb052f1d9f8451fd20c730a8","Node name for S&R":"VHS_VideoCombine"},"widgets_values":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideoWrapper_I2V_endframe","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"videopreview":{"hidden":false,"paused":false,"params":{"filename":"WanVideoWrapper_I2V_endframe_00053.mp4","subfolder":"","type":"output","format":"video/h264-mp4","frame_rate":16,"workflow":"WanVideoWrapper_I2V_endframe_00053.png","fullpath":"/home/lith/workspace/ComfyUI/output/WanVideoWrapper_I2V_endframe_00053.mp4"}}}},{"id":108,"type":"CPackInputString","pos":[-1614.857421875,-405.0226745605469],"size":[315,58],"flags":{},"order":20,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"STRING","links":[187]}],"title":"prompt","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputString"},"widgets_values":["那只骑摩托车的蓝色生物现在躺在床上，盖着被子，周围的环境从明亮的户外场景变成了昏暗的室内卧室。摩托车和户外元素消失了，取而代之的是一张床和一个带灯的床头柜。"]},{"id":27,"type":"WanVideoSampler","pos":[1309.790283203125,-404.7504577636719],"size":[315,827],"flags":{},"order":43,"mode":0,"inputs":[{"name":"model","type":"WANVIDEOMODEL","link":29},{"name":"text_embeds","type":"WANVIDEOTEXTEMBEDS","link":30},{"name":"image_embeds","type":"WANVIDIMAGE_EMBEDS","link":133},{"name":"samples","shape":7,"type":"LATENT","link":null},{"name":"feta_args","shape":7,"type":"FETAARGS","link":null},{"name":"context_options","shape":7,"type":"WANVIDCONTEXT","link":null},{"name":"teacache_args","shape":7,"type":"TEACACHEARGS","link":199},{"name":"flowedit_args","shape":7,"type":"FLOWEDITARGS","link":null},{"name":"slg_args","shape":7,"type":"SLGARGS","link":null},{"name":"loop_args","shape":7,"type":"LOOPARGS","link":null},{"name":"experimental_args","shape":7,"type":"EXPERIMENTALARGS","link":null},{"name":"sigmas","shape":7,"type":"SIGMAS","link":null},{"name":"unianimate_poses","shape":7,"type":"UNIANIMATE_POSE","link":null},{"name":"steps","type":"INT","widget":{"name":"steps"},"link":195},{"name":"seed","type":"INT","widget":{"name":"seed"},"link":200}],"outputs":[{"name":"samples","type":"LATENT","slot_index":0,"links":[166]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoSampler"},"widgets_values":[30,4.500000000000001,16.000000000000004,269411617492639,"randomize",true,"unipc",0,1,"","comfy"]},{"id":120,"type":"CPackInputInt","pos":[-1718.1478271484375,1415.8812255859375],"size":[315,106],"flags":{},"order":21,"mode":0,"inputs":[],"outputs":[{"name":"value","type":"INT","links":[200]}],"title":"seed","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputInt"},"widgets_values":[0,-9223372036854776000,9223372036854776000]},{"id":107,"type":"CPackInputImage","pos":[-1570.995361328125,175.2484893798828],"size":[315,314],"flags":{},"order":22,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[186]},{"name":"MASK","type":"MASK","links":null}],"title":"endImage","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputImage"},"widgets_values":["example.png","image"]},{"id":106,"type":"CPackInputImage","pos":[-1565.0498046875,-221.30941772460938],"size":[315,314],"flags":{},"order":23,"mode":0,"inputs":[],"outputs":[{"name":"IMAGE","type":"IMAGE","links":[185]},{"name":"MASK","type":"MASK","links":null}],"title":"startImage","properties":{"cnr_id":"comfy-pack","ver":"38a84279706db427e3d3021b4ce95e87581a8b4a","Node name for S&R":"CPackInputImage"},"widgets_values":["example.png","image"]},{"id":56,"type":"LoadWanVideoClipTextEncoder","pos":[-1010.0594482421875,-463.0421142578125],"size":[510.6601257324219,106],"flags":{},"order":24,"mode":0,"inputs":[],"outputs":[{"name":"wan_clip_vision","type":"CLIP_VISION","slot_index":0,"links":[123]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"LoadWanVideoClipTextEncoder"},"widgets_values":["open-clip-xlm-roberta-large-vit-huge-14_visual_fp16.safetensors","fp16","offload_device"],"color":"#2a363b","bgcolor":"#3f5159"},{"id":11,"type":"LoadWanVideoT5TextEncoder","pos":[161.7229461669922,-501.2225036621094],"size":[377.1661376953125,130],"flags":{},"order":25,"mode":0,"inputs":[],"outputs":[{"name":"wan_t5_model","type":"WANTEXTENCODER","slot_index":0,"links":[15]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"LoadWanVideoT5TextEncoder"},"widgets_values":["umt5-xxl-enc-fp8_e4m3fn.safetensors","fp32","offload_device","fp8_e4m3fn"],"color":"#332922","bgcolor":"#593930"},{"id":38,"type":"WanVideoVAELoader","pos":[165.65065002441406,-324.7489318847656],"size":[372.7727966308594,82],"flags":{},"order":26,"mode":0,"inputs":[],"outputs":[{"name":"vae","type":"WANVAE","slot_index":0,"links":[165,170]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoVAELoader"},"widgets_values":["Wan2_1_VAE_bf16.safetensors","bf16"],"color":"#322","bgcolor":"#533"},{"id":39,"type":"WanVideoBlockSwap","pos":[-210,-760],"size":[315,154],"flags":{},"order":27,"mode":0,"inputs":[],"outputs":[{"name":"block_swap_args","type":"BLOCKSWAPARGS","slot_index":0,"links":[]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoBlockSwap"},"widgets_values":[5,false,false,true,0],"color":"#223","bgcolor":"#335"},{"id":22,"type":"WanVideoModelLoader","pos":[150,-780],"size":[477.4410095214844,234],"flags":{},"order":32,"mode":0,"inputs":[{"name":"compile_args","shape":7,"type":"WANCOMPILEARGS","link":192},{"name":"block_swap_args","shape":7,"type":"BLOCKSWAPARGS","link":null},{"name":"lora","shape":7,"type":"WANVIDLORA","link":null},{"name":"vram_management_args","shape":7,"type":"VRAM_MANAGEMENTARGS","link":null},{"name":"vace_model","shape":7,"type":"VACEPATH","link":null}],"outputs":[{"name":"model","type":"WANVIDEOMODEL","slot_index":0,"links":[29,103]}],"properties":{"cnr_id":"ComfyUI-WanVideoWrapper","ver":"d9b1f4d1a5aea91d101ae97a54714a5861af3f50","Node name for S&R":"WanVideoModelLoader"},"widgets_values":["Wan2_1-FLF2V-14B-720P_fp8_e4m3fn.safetensors","fp16","fp8_e4m3fn","offload_device","sageattn"],"color":"#223","bgcolor":"#335"}],"links":[[15,11,0,16,0,"WANTEXTENCODER"],[29,22,0,27,0,"WANVIDEOMODEL"],[30,16,0,27,1,"WANVIDEOTEXTEMBEDS"],[52,48,0,49,0,"CLIP"],[53,48,0,50,0,"CLIP"],[54,49,0,46,0,"CONDITIONING"],[55,50,0,46,1,"CONDITIONING"],[90,71,0,30,0,"IMAGE"],[97,76,1,77,1,"INT"],[98,76,2,77,2,"INT"],[103,22,0,16,1,"WANVIDEOMODEL"],[123,56,0,88,0,"CLIP_VISION"],[133,89,0,27,2,"WANVIDIMAGE_EMBEDS"],[135,76,1,89,7,"INT"],[136,76,2,89,8,"INT"],[140,77,0,91,0,"*"],[141,91,0,88,1,"IMAGE"],[143,76,0,92,0,"*"],[144,92,0,89,3,"IMAGE"],[147,93,0,95,0,"IMAGE"],[148,95,0,70,0,"IMAGE"],[149,94,0,96,0,"IMAGE"],[150,96,0,70,1,"IMAGE"],[151,68,2,97,0,"INT"],[152,97,0,71,1,"IMAGE"],[158,70,0,71,2,"IMAGE"],[164,68,0,71,0,"IMAGE"],[165,38,0,101,0,"WANVAE"],[166,27,0,101,1,"LATENT"],[167,101,0,68,0,"IMAGE"],[170,38,0,89,0,"WANVAE"],[171,91,0,89,2,"IMAGE"],[172,88,0,89,1,"WANVIDIMAGE_CLIPEMBEDS"],[176,92,0,88,2,"IMAGE"],[184,68,0,105,0,"IMAGE"],[185,106,0,77,0,"IMAGE"],[186,107,0,76,0,"IMAGE"],[187,108,0,16,2,"STRING"],[188,105,0,111,0,"VHS_FILENAMES"],[189,111,0,109,0,"STRING"],[192,35,0,22,0,"WANCOMPILEARGS"],[193,113,0,76,1,"INT"],[194,114,0,76,2,"INT"],[195,115,0,27,13,"INT"],[196,116,0,117,0,"INT,FLOAT"],[197,117,0,89,9,"INT"],[199,52,0,27,6,"TEACACHEARGS"],[200,120,0,27,14,"INT"]],"groups":[{"id":1,"title":"ComfyUI text encoding alternative","bounding":[-387.2457275390625,351.45703125,1210.621337890625,805.9080810546875],"color":"#3f789e","font_size":24,"flags":{}}],"config":{},"extra":{"ds":{"scale":0.25937424601000186,"offset":[218.28905380195783,1635.1332807702943]},"frontendVersion":"1.18.6","node_versions":{"ComfyUI-WanVideoWrapper":"f8f423eceeadf2edcb58fab73701333e83ca733e","comfy-core":"0.3.26","ComfyUI_essentials":"76e9d1e4399bd025ce8b12c290753d58f9f53e93","ComfyUI-KJNodes":"a5bd3c86c8ed6b83c55c2d0e7a59515b15a0137f","ComfyUI-VideoHelperSuite":"0a75c7958fe320efcb052f1d9f8451fd20c730a8"},"VHS_latentpreview":false,"VHS_latentpreviewrate":0,"VHS_MetadataImage":true,"VHS_KeepIntermediate":true},"version":0.4},"workflow_api":{"11":{"inputs":{"model_name":"umt5-xxl-enc-fp8_e4m3fn.safetensors","precision":"fp32","load_device":"offload_device","quantization":"fp8_e4m3fn"},"class_type":"LoadWanVideoT5TextEncoder","_meta":{"title":"Load WanVideo T5 TextEncoder"}},"16":{"inputs":{"positive_prompt":["108",0],"negative_prompt":"色调艳丽，过曝，静态，细节模糊不清，字幕，风格，作品，画作，画面，静止，整体发灰，最差质量，低质量，JPEG压缩残留，丑陋的，残缺的，多余的手指，画得不好的手部，画得不好的脸部，畸形的，毁容的，形态畸形的肢体，手指融合，静止不动的画面，杂乱的背景，三条腿，背景人很多，倒着走","force_offload":true,"t5":["11",0],"model_to_offload":["22",0]},"class_type":"WanVideoTextEncode","_meta":{"title":"WanVideo TextEncode"}},"22":{"inputs":{"model":"Wan2_1-FLF2V-14B-720P_fp8_e4m3fn.safetensors","base_precision":"fp16","quantization":"fp8_e4m3fn","load_device":"offload_device","attention_mode":"sageattn","compile_args":["35",0]},"class_type":"WanVideoModelLoader","_meta":{"title":"WanVideo Model Loader"}},"27":{"inputs":{"steps":["115",0],"cfg":4.500000000000001,"shift":16.000000000000004,"seed":["120",0],"force_offload":true,"scheduler":"unipc","riflex_freq_index":0,"denoise_strength":1,"batched_cfg":"","rope_function":"comfy","model":["22",0],"text_embeds":["16",0],"image_embeds":["89",0],"teacache_args":["52",0]},"class_type":"WanVideoSampler","_meta":{"title":"WanVideo Sampler"}},"30":{"inputs":{"frame_rate":16,"loop_count":0,"filename_prefix":"WanVideoWrapper_I2V_endframe","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"images":["71",0]},"class_type":"VHS_VideoCombine","_meta":{"title":"Video Combine 🎥🅥🅗🅢"}},"35":{"inputs":{"backend":"inductor","fullgraph":false,"mode":"default","dynamic":false,"dynamo_cache_size_limit":64,"compile_transformer_blocks_only":true,"dynamo_recompile_limit":128},"class_type":"WanVideoTorchCompileSettings","_meta":{"title":"WanVideo Torch Compile Settings"}},"38":{"inputs":{"model_name":"Wan2_1_VAE_bf16.safetensors","precision":"bf16"},"class_type":"WanVideoVAELoader","_meta":{"title":"WanVideo VAE Loader"}},"39":{"inputs":{"blocks_to_swap":5,"offload_img_emb":false,"offload_txt_emb":false,"use_non_blocking":true,"vace_blocks_to_swap":0},"class_type":"WanVideoBlockSwap","_meta":{"title":"WanVideo BlockSwap"}},"45":{"inputs":{"offload_percent":1},"class_type":"WanVideoVRAMManagement","_meta":{"title":"WanVideo VRAM Management"}},"52":{"inputs":{"rel_l1_thresh":0.22000000000000006,"start_step":6,"end_step":-1,"cache_device":"offload_device","use_coefficients":"true","mode":"e0"},"class_type":"WanVideoTeaCache","_meta":{"title":"WanVideo TeaCache"}},"56":{"inputs":{"model_name":"open-clip-xlm-roberta-large-vit-huge-14_visual_fp16.safetensors","precision":"fp16","load_device":"offload_device"},"class_type":"LoadWanVideoClipTextEncoder","_meta":{"title":"Load WanVideo Clip Encoder"}},"68":{"inputs":{"image":["101",0]},"class_type":"GetImageSizeAndCount","_meta":{"title":"Get Image Size & Count"}},"70":{"inputs":{"inputcount":2,"direction":"down","match_image_size":true,"Update inputs":null,"image_1":["95",0],"image_2":["96",0]},"class_type":"ImageConcatMulti","_meta":{"title":"Image Concatenate Multi"}},"71":{"inputs":{"inputcount":3,"direction":"left","match_image_size":true,"Update inputs":null,"image_1":["68",0],"image_2":["97",0],"image_3":["70",0]},"class_type":"ImageConcatMulti","_meta":{"title":"Image Concatenate Multi"}},"72":{"inputs":{"blocks":"9","start_percent":0.20000000000000004,"end_percent":0.8000000000000002},"class_type":"WanVideoSLG","_meta":{"title":"WanVideo SLG"}},"76":{"inputs":{"width":["113",0],"height":["114",0],"interpolation":"lanczos","method":"fill / crop","condition":"always","multiple_of":16,"image":["107",0]},"class_type":"ImageResize+","_meta":{"title":"🔧 Image Resize"}},"77":{"inputs":{"width":["76",1],"height":["76",2],"interpolation":"lanczos","method":"fill / crop","condition":"always","multiple_of":16,"image":["106",0]},"class_type":"ImageResize+","_meta":{"title":"🔧 Image Resize"}},"88":{"inputs":{"strength_1":1,"strength_2":1,"crop":"center","combine_embeds":"concat","force_offload":false,"tiles":0,"ratio":0.5,"clip_vision":["56",0],"image_1":["77",0],"image_2":["76",0]},"class_type":"WanVideoClipVisionEncode","_meta":{"title":"WanVideo ClipVision Encode"}},"89":{"inputs":{"width":["76",1],"height":["76",2],"num_frames":["117",0],"noise_aug_strength":0,"start_latent_strength":1,"end_latent_strength":true,"force_offload":false,"fun_or_fl2v_model":true,"vae":["38",0],"clip_embeds":["88",0],"start_image":["77",0],"end_image":["76",0]},"class_type":"WanVideoImageToVideoEncode","_meta":{"title":"WanVideo ImageToVideo Encode"}},"95":{"inputs":{"text_x":10,"text_y":2,"height":48,"font_size":32,"font_color":"white","label_color":"black","font":"FreeMono.ttf","text":"start_frame","direction":"up","image":["77",0]},"class_type":"AddLabel","_meta":{"title":"Add Label"}},"96":{"inputs":{"text_x":10,"text_y":2,"height":48,"font_size":32,"font_color":"white","label_color":"black","font":"FreeMono.ttf","text":"end_frame","direction":"up","image":["76",0]},"class_type":"AddLabel","_meta":{"title":"Add Label"}},"97":{"inputs":{"width":8,"height":["68",2],"batch_size":1,"color":0},"class_type":"EmptyImage","_meta":{"title":"EmptyImage"}},"101":{"inputs":{"enable_vae_tiling":false,"tile_x":272,"tile_y":272,"tile_stride_x":144,"tile_stride_y":128,"vae":["38",0],"samples":["27",0]},"class_type":"WanVideoDecode","_meta":{"title":"WanVideo Decode"}},"103":{"inputs":{"video_attention_split_steps":"","cfg_zero_star":true,"use_zero_init":false,"zero_star_steps":0,"use_fresca":false,"fresca_scale_low":1,"fresca_scale_high":1.25,"fresca_freq_cutoff":20},"class_type":"WanVideoExperimentalArgs","_meta":{"title":"WanVideo Experimental Args"}},"105":{"inputs":{"frame_rate":16,"loop_count":0,"filename_prefix":"AnimateDiff","format":"video/h264-mp4","pix_fmt":"yuv420p","crf":19,"save_metadata":true,"trim_to_audio":false,"pingpong":false,"save_output":true,"images":["68",0]},"class_type":"VHS_VideoCombine","_meta":{"title":"Video Combine 🎥🅥🅗🅢"}},"106":{"inputs":{"image":"example.png"},"class_type":"CPackInputImage","_meta":{"title":"startImage","options":{"values":["example.png"]}}},"107":{"inputs":{"image":"example.png"},"class_type":"CPackInputImage","_meta":{"title":"endImage","options":{"values":["example.png"]}}},"108":{"inputs":{"value":"那只骑摩托车的蓝色生物现在躺在床上，盖着被子，周围的环境从明亮的户外场景变成了昏暗的室内卧室。摩托车和户外元素消失了，取而代之的是一张床和一个带灯的床头柜。"},"class_type":"CPackInputString","_meta":{"title":"prompt","options":{}}},"109":{"inputs":{"filename_prefix":"cpack_output_","filename":["111",0]},"class_type":"CPackOutputFile","_meta":{"title":"File Output"}},"111":{"inputs":{"index":-1,"filenames":["105",0]},"class_type":"VHS_SelectFilename","_meta":{"title":"Select Filename 🎥🅥🅗🅢"}},"113":{"inputs":{"value":768,"min":0,"max":1280},"class_type":"CPackInputInt","_meta":{"title":"width","options":{"min":0,"max":2048,"step":10,"step2":1,"precision":0}}},"114":{"inputs":{"value":768,"min":0,"max":1280},"class_type":"CPackInputInt","_meta":{"title":"height","options":{"min":0,"max":2048,"step":10,"step2":1,"precision":0}}},"115":{"inputs":{"value":30,"min":0,"max":100},"class_type":"CPackInputInt","_meta":{"title":"steps","options":{"min":0,"max":2048,"step":10,"step2":1,"precision":0}}},"116":{"inputs":{"value":2,"min":0,"max":5},"class_type":"CPackInputInt","_meta":{"title":"seconds","options":{"min":0,"max":2048,"step":10,"step2":1,"precision":0}}},"117":{"inputs":{"value":"a * 16 + 1","a":["116",0]},"class_type":"SimpleMath+","_meta":{"title":"🔧 Simple Math"}},"120":{"inputs":{"value":0,"min":-9223372036854776000,"max":9223372036854776000},"class_type":"CPackInputInt","_meta":{"title":"seed","options":{"min":0,"max":2048,"step":10,"step2":1,"precision":0}}}}}' \
  --insecure) &
  comfy --workspace=comfy launch -- --listen 0.0.0.0
